<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>信用管理</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
		<meta name="format-detection" content="telephone=no" />
		<link rel="shortcut icon" type="image/png" href="@{' /HRzhicha/public/images/favicon.ico'}" />
		<link rel="stylesheet" type="text/css" href=" /HRzhicha/public/stylesheets/css/reset.css" />
		<link rel="stylesheet" type="text/css" href=" /HRzhicha/public/stylesheets/css/style.css" />
		<link rel="stylesheet" type="text/css" href=" /HRzhicha/public/stylesheets/css/xstyle.css" />
		<script type="text/javascript" src=" /HRzhicha/public/javascripts/js/jquery.1.9.1.js"></script>
		<script type="text/javascript" src=" /HRzhicha/public/javascripts/js/js.js"></script>
		<!--<script type="text/javascript" src=" /HRzhicha/public/javascripts/js/xcreditManagement.js"></script>-->
		<style>
			canvas {
				width: 100%;
				/* border: 1px solid red;*/
				position: relative;
				margin-top: .3rem;
				z-index: 9999999;
				/*color: red;*/
				-webkit-font-smoothing:none
				/*left: 50%;
				  top: 50%;
				transform: translate(-50%, -50%);*/
               /* background: -webkit-linear-gradient(top, #0e83f5 0%, #21bdf6 100%);
                background: -ms-linear-gradient(top, #0e83f5 0%, #21bdf6 100%);
                background: -moz-linear-gradient(top, #0e83f5 0%, #21bdf6 100%);
                background: linear-gradient(top, #0e83f5 0%, #21bdf6 100%);
           */
			}
		</style>
	</head>

	<body class="ggg">
		<div class="pay_tits1" style="background: none;">
			<img src="/HRzhicha/public/images/img/fhl.png" onclick="javascript:history.back(-1);" />
			<p class="txtl" style="color: #FFFFFF;">信用管理</p>
		</div>
		<div class="xcreditManagement">

			<div class="credit_management">
				<div class="credit_pad" style="">
					<!--<img src="/HRzhicha/public/images/img/credit2.png" />-->
					<canvas id="canvas" width="700" height="700" data-score='86'></canvas>
				</div>

			</div>

			<div class="credit_privilege">

				<div class="privilege_img fl">
					<img src="/HRzhicha/public/images/img/credit4.png" />

				</div>

				<div class="privilege_text fl">
					<h6>信用特权</h6>
					<p>信用越好权益越多，科学准确提升分数！</p>
				</div>

				<div class="clear"></div>

			</div>

			<div class="boost">
				<div class="boost_l fl"></div>

				<div class="boost_txt fl">提升信用</div>

				<div class="clear"></div>
			</div>

			<div class="boost_list">
				<ul>
					<li>
						<span class="boost_list_txt fl">个人信用</span>
						<img src="/HRzhicha/public/images/img/center_36.jpg" class="fr" />
						<span class="boost_list_txt2 dw fr">去查询</span>
						<div class="clear"></div>
					</li>
					<li>
						<span class="boost_list_txt fl">企业信用</span>
						<img src="/HRzhicha/public/images/img/center_36.jpg" class="fr" />
						<span class="boost_list_txt2 fr dw">去查询</span>
						<div class="clear"></div>
					</li>
					<li>
						<span class="boost_list_txt fl">行为风险测评</span>
						<img src="/HRzhicha/public/images/img/center_36.jpg" class="fr" />
						<span class="boost_list_txt2 fr yw">已完成</span>
						<div class="clear"></div>
					</li>
					<li>
						<span class="boost_list_txt fl">信用评估</span>
						<img src="/HRzhicha/public/images/img/center_36.jpg" class="fr" />
						<span class="boost_list_txt2 fr dw">待完成</span>
						<div class="clear"></div>
					</li>
				</ul>
			</div>

		</div>

	</body>
	
	
	<script type="text/javascript">
		window.onload = function() {
			var canvas = document.getElementById('canvas'),
				ctx = canvas.getContext('2d'),
				cWidth = canvas.width,
				cHeight = canvas.height,
				score = canvas.attributes['data-score'].value,
				stage = ['较差', '中等', '良好', '优秀', '极好'],
				radius = 240, //外圆的半径
				//圆所在的角度，刻度所在的角度
				deg0 = Math.PI / 9,
				deg1 = Math.PI * 11 / 45;

			if(score < 0 || score > 900){
				alert('信用分数区间：10~100');
			} else {
				var dot = new Dot(),
					dotSpeed = 0.03,
					textSpeed = Math.round(dotSpeed * 100 / deg1),
					angle = 0,
					credit = 10;

				(function drawFrame() {

					ctx.save();
					ctx.clearRect(0, 0, cWidth, cHeight);
					ctx.translate(cWidth / 2, cHeight / 2);
					ctx.rotate(8 * deg0);

					dot.x = radius * Math.cos(angle);
					dot.y = radius * Math.sin(angle);

					var aim = (score - 0) * deg1 / 20;
					if(angle < aim) {
						angle += dotSpeed;
					}
					dot.draw(ctx);

					if(credit < score - textSpeed) {
						credit += textSpeed;
					} else if(credit >= score - textSpeed && credit < score) {
						credit += 1;
					}
					text(credit);

					ctx.save();
					ctx.beginPath();
					ctx.lineWidth = 26; //跑动的宽度
					ctx.strokeStyle = '#EFC980';
					ctx.arc(0, 0, radius, 0, angle, false);
					ctx.stroke();
					ctx.restore();

					window.requestAnimationFrame(drawFrame);

					/*ctx.save(); //中间刻度层
					ctx.beginPath();
					ctx.strokeStyle = 'rgba(255, 255, 255, .2)';
					ctx.lineWidth = 10;
					ctx.arc(0, 0, 200, 0, 11 * deg0, false);
					ctx.stroke();
					ctx.restore();*/

					ctx.save(); // 刻度线
					 /*for(var i = 0; i < 6; i++) {
					     ctx.beginPath();
					     ctx.lineWidth = 2;
					     ctx.strokeStyle = 'rgba(255, 255, 255, .3)';
					     ctx.moveTo(140, 0);
					     ctx.lineTo(130, 0);
					     ctx.stroke();
					     ctx.rotate(deg1);
					 }*/
					ctx.restore();

					ctx.save(); // 细分刻度线
					/* for(i = 0; i < 25; i++) {
					     if(i % 5 !== 0) {
					         ctx.beginPath();
					         ctx.lineWidth = 2;
					         ctx.strokeStyle = 'rgba(255, 255, 255, .1)';
					         ctx.moveTo(140, 0);
					         ctx.lineTo(133, 0);
					         ctx.stroke();
					     }
					     ctx.rotate(deg1 / 5);
					 }*/
					ctx.restore();

					ctx.save(); //信用分数
					ctx.rotate(Math.PI / 2);
					for(i = 0; i < 6; i++) {
						ctx.fillStyle = '#999999'; //刻度数字的颜色
						ctx.font = '20px Microsoft yahei';
						ctx.textAlign = 'center';
						ctx.fillText(0 + 20 * i, 0, -190); //位置
						ctx.rotate(deg1);
					}
					ctx.restore();

					ctx.save(); //分数段
					ctx.rotate(Math.PI / 2 + deg0);
					for(i = 0; i < 5; i++) {
						ctx.fillStyle = '#999999';
						ctx.font = '20px Microsoft yahei'; //刻度优秀的颜色
						ctx.textAlign = 'center';
						ctx.fillText(stage[i], 5, -190); //位置
						ctx.rotate(deg1);
					}
					ctx.restore();

					ctx.save(); //信用阶段及评估时间文字
					ctx.rotate(10 * deg0);
					ctx.fillStyle = '#EFC980'; //信用极好的颜色
					ctx.font = '30px Microsoft yahei'; //信用极好的大小
					ctx.textAlign = 'center';
					if(score < 50) {
						ctx.fillText('信用较差', 0, 20);
					} else if(score < 60 && score >= 50) {
						ctx.fillText('信用中等', 0,20);
					} else if(score < 70 && score >= 60) {
						ctx.fillText('信用良好', 0, 20);
					} else if(score < 80 && score >= 70) {
						ctx.fillText('信用优秀', 0, 20);
					} else if(score <= 100 && score >= 80) {
						ctx.fillText('信用极好', 0, 20);
					}

					ctx.fillStyle = '#666666';//时间
					ctx.font = '14px Microsoft yahei';
					//ctx.fillText('评估时间：2016.11.06', 0, 60);
					var date = new Date();
				var ymd = date.getFullYear() + '.' + (date.getMonth() + 1) + '.' + date.getDate();
				ctx.fillText('评估时间 : ' + ymd, 0, 100);

					ctx.fillStyle = '#7ec5f9';
					ctx.font = '14px Microsoft yahei';
					/* ctx.fillText('BETA', 0, -60);*/
					ctx.restore();

					// ctx.save(); //最外层轨道(底色)
					ctx.beginPath();
					ctx.strokeStyle = 'rgba(255, 255, 255, .4)';
					ctx.lineWidth = 26;
					ctx.arc(0, 0, radius, 0, 11 * deg0, false);
					ctx.stroke();
					ctx.restore();

				})();
			}

			function Dot() {
				this.x = 0;
				this.y = 0;
				this.draw = function(ctx) {
					ctx.save();
					ctx.beginPath();
					ctx.fillStyle = 'rgba(255, 255, 255, .7)'; //滑动小球的颜色
					ctx.arc(this.x, this.y, 0, 0, Math.PI * 2, false);
					ctx.fill();
					ctx.restore();
				};
			}

			function text(process) {
				ctx.save();
				ctx.rotate(10 * deg0);
				ctx.fillStyle = '#EFC980';
				ctx.font = '120px Microsoft yahei';
				ctx.textAlign = 'center';
				ctx.textBaseLine = 'top';
				ctx.fillText(process, 0, -50); //数值的位置
				ctx.restore();
			}
		};
		
	</script>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</html>